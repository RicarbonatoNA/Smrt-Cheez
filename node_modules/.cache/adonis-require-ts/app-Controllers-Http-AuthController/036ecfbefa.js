"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const User_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/User"));
class AuthController {
    async login({ request, auth, response }) {
        try {
            const email = request.input('email');
            const password = request.input('password');
            const token = await auth.use('api').attempt(email, password, { expiresIn: '30mins' });
            response.ok({ mensaje: 'se logueo correctamente', token: token, estado: true });
        }
        catch {
            response.unauthorized({ mensaje: 'Hubo un error', estado: false });
        }
    }
    async register({ response, request }) {
        try {
            const user = request.all();
            await User_1.default.create(user);
            response.ok({ mensaje: 'se registr√≥ correctamente', estado: true });
        }
        catch {
            response.badRequest({ mensaje: 'Hubo un error', estado: false });
        }
    }
}
exports.default = AuthController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXV0aENvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJBdXRoQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLGlGQUFrQztBQUVsQyxNQUFxQixjQUFjO0lBQ3hCLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBcUI7UUFDNUQsSUFBRztZQUNDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDcEMsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUMxQyxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFBQyxTQUFTLEVBQUMsUUFBUSxFQUFDLENBQUMsQ0FBQTtZQUNsRixRQUFRLENBQUMsRUFBRSxDQUFFLEVBQUMsT0FBTyxFQUFDLHlCQUF5QixFQUFFLEtBQUssRUFBQyxLQUFLLEVBQUUsTUFBTSxFQUFDLElBQUksRUFBQyxDQUFDLENBQUE7U0FDOUU7UUFBQyxNQUFLO1lBQ0gsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFDLE9BQU8sRUFBQyxlQUFlLEVBQUUsTUFBTSxFQUFDLEtBQUssRUFBQyxDQUFDLENBQUE7U0FDakU7SUFDTCxDQUFDO0lBRU0sS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFDLFFBQVEsRUFBRSxPQUFPLEVBQXFCO1FBQ3pELElBQUc7WUFDQyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUE7WUFDMUIsTUFBTSxjQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ3ZCLFFBQVEsQ0FBQyxFQUFFLENBQUUsRUFBQyxPQUFPLEVBQUMsMkJBQTJCLEVBQUUsTUFBTSxFQUFDLElBQUksRUFBQyxDQUFDLENBQUE7U0FDbkU7UUFDRCxNQUFLO1lBQ0QsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFDLE9BQU8sRUFBQyxlQUFlLEVBQUUsTUFBTSxFQUFDLEtBQUssRUFBQyxDQUFDLENBQUE7U0FDL0Q7SUFDTCxDQUFDO0NBQ0o7QUF0QkQsaUNBc0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYWRvbmlzanMvY29yZS9idWlsZC9zdGFuZGFsb25lJ1xuaW1wb3J0IHR5cGUgeyBIdHRwQ29udGV4dENvbnRyYWN0IH0gZnJvbSAnQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dCdcbmltcG9ydCBVc2VyIGZyb20gJ0FwcC9Nb2RlbHMvVXNlcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0aENvbnRyb2xsZXIge1xuICAgIHB1YmxpYyBhc3luYyBsb2dpbih7cmVxdWVzdCwgYXV0aCwgcmVzcG9uc2V9Okh0dHBDb250ZXh0Q29udHJhY3Qpe1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBjb25zdCBlbWFpbCA9IHJlcXVlc3QuaW5wdXQoJ2VtYWlsJylcbiAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkID0gcmVxdWVzdC5pbnB1dCgncGFzc3dvcmQnKVxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBhdXRoLnVzZSgnYXBpJykuYXR0ZW1wdChlbWFpbCwgcGFzc3dvcmQsIHtleHBpcmVzSW46JzMwbWlucyd9KVxuICAgICAgICAgICAgcmVzcG9uc2Uub2sgKHttZW5zYWplOidzZSBsb2d1ZW8gY29ycmVjdGFtZW50ZScsIHRva2VuOnRva2VuLCBlc3RhZG86dHJ1ZX0pXG4gICAgICAgIH0gY2F0Y2h7XG4gICAgICAgICAgICByZXNwb25zZS51bmF1dGhvcml6ZWQoe21lbnNhamU6J0h1Ym8gdW4gZXJyb3InLCBlc3RhZG86ZmFsc2V9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHJlZ2lzdGVyKHtyZXNwb25zZSwgcmVxdWVzdH06SHR0cENvbnRleHRDb250cmFjdCl7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSByZXF1ZXN0LmFsbCgpXG4gICAgICAgICAgICBhd2FpdCBVc2VyLmNyZWF0ZSh1c2VyKVxuICAgICAgICAgICAgcmVzcG9uc2Uub2sgKHttZW5zYWplOidzZSByZWdpc3Ryw7MgY29ycmVjdGFtZW50ZScsIGVzdGFkbzp0cnVlfSlcbiAgICAgICAgfVxuICAgICAgICBjYXRjaHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmJhZFJlcXVlc3Qoe21lbnNhamU6J0h1Ym8gdW4gZXJyb3InLCBlc3RhZG86ZmFsc2V9KVxuICAgICAgICB9XG4gICAgfVxufVxuIl19